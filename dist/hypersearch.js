(function(a){typeof define=="function"&&define.amd?define(a):a()})(function(){"use strict";const a="data-hypersearch",u="data-hypersearch-start",l="data-hypersearch-end";function d(t,e){e.forEach(n=>n.updateVisibility(t))}function h(t){const n=S([...t.querySelectorAll(f(t))]).flatMap(c.make);return T(n),n}class c{constructor(e){this.domElement=e,this.ancestorHeadings=[],this.descendents=[],this._lastSearch=null,this._lastSearchMatched=!1;const n=g(e.innerText);this._searchableText=[n,p(e),m(e)].filter(Boolean).join(" ");const s=e.tagName.toLowerCase();this._inspectString=`${s} ${n}`}static make(e){return e instanceof HTMLElement?[new c(e)]:[]}addAncestorHeading(e){this.ancestorHeadings.push(e),this._searchableText+=" "+e.searchableText()}addDescendent(e){this.descendents.push(e)}updateVisibility(e){this.domElement.style.display=this.shouldBeVisible(e)?"":"none"}shouldBeVisible(e){return this.matches(e)||this.descendents.some(n=>n.matches(e))}matches(e){return e!==this._lastSearch&&(this._lastSearch=e,this._lastSearchMatched=e.matches(this.searchableText())),this._lastSearchMatched}headingLevel(){switch(this.domElement.tagName){case"H2":return 0;case"H3":return 1;case"H4":return 2;case"H5":return 3;case"H6":return 4;default:return null}}inspect(){return this._inspectString}searchableText(){return this._searchableText}}function f(t){const e="h2, h3, h4, h5, h6",n="p, blockquote, pre, hr",s="ul, ol",i=`[${u}]`,r=`[${l}]`;return t.querySelector(`${i}`)?`
      ${i},
      ${r},
      ${i} ~ :is(${n}, ${e}),
      ${i} ~ :is(${s}) > li
    `:`
      ${e},
      :is(${e}) ~ :is(${n}),
      :is(${e}) ~ :is(${s}) > li
    `}function p(t){return[...t.querySelectorAll("hs-meta[keywords]")].map(e=>e.getAttribute("keywords")).join(" ")}function m(t){return[...t.querySelectorAll("a[href]")].map(e=>e.getAttribute("href")).join(" ")}function g(t){return t.replace(/\xAD/g,"")}function S(t){const e=t.findIndex(n=>n.getAttribute(l)!=null);return t.slice(0,e!==-1?e:t.length)}function T(t){const e=[null,null,null,null,null],n=e.length;for(const s of t){const i=s.headingLevel();if(i!=null){e[i]=s;for(let r=i+1;r<n;r++)e[r]=null;for(let r=i-1;r>=0;r--){const o=e[r];o!=null&&(o.addDescendent(s),s.addAncestorHeading(o))}}else for(const r of e)r!=null&&(r.addDescendent(s),s.addAncestorHeading(r))}}function y(t){document.readyState!=="loading"?setTimeout(t,0):document.addEventListener("DOMContentLoaded",t)}class ${constructor(e){this.prefixes=e.toLowerCase().split(/\s+/).filter(Boolean)}matches(e){if(e==="")return!1;const n=e.toLowerCase();return this.prefixes.every(s=>A(s,n))}}function A(t,e){const n=e.indexOf(t);return n===0||b(e[n-1])}function b(t){return` 
\r	\`~!@#$%^&*()-_=+[{]}\\|;:'",<.>/?`.includes(t)}y(x);function x(){const t=document.querySelector(`input[${a}]`);if(t==null)return;const e=h(document.body),n=()=>{const s=new $(t.value);d(s,e)};n(),t.addEventListener("input",n)}});
