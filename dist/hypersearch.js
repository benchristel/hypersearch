(function(i){typeof define=="function"&&define.amd?define(i):i()})(function(){"use strict";const i="data-hypersearch",h="data-hypersearch-start",o="data-hypersearch-end";function u(t,e){e.forEach(n=>n.updateVisibility(t))}function d(t){const n=p([...t.querySelectorAll(f(t))]).flatMap(c.make);return S(n),n}class c{constructor(e){this.domElement=e,this.ancestorHeadings=[],this.descendents=[],this._lastSearch=null,this._lastSearchMatched=!1;const n=g(e.innerText);this._searchableText=[n,m(e)].filter(Boolean).join(" ");const s=e.tagName.toLowerCase();this._inspectString=`${s} ${n}`}static make(e){return e instanceof HTMLElement?[new c(e)]:[]}addAncestorHeading(e){this.ancestorHeadings.push(e),this._searchableText+=" "+e.searchableText()}addDescendent(e){this.descendents.push(e)}updateVisibility(e){this.domElement.style.display=this.shouldBeVisible(e)?"":"none"}shouldBeVisible(e){return this.matches(e)||this.descendents.some(n=>n.matches(e))}matches(e){return e!==this._lastSearch&&(this._lastSearch=e,this._lastSearchMatched=e.matches(this.searchableText())),this._lastSearchMatched}headingLevel(){switch(this.domElement.tagName){case"H2":return 0;case"H3":return 1;case"H4":return 2;case"H5":return 3;case"H6":return 4;default:return null}}inspect(){return this._inspectString}searchableText(){return this._searchableText}}function f(t){const e="h2, h3, h4, h5, h6",n="p, blockquote, pre, hr",s="ul, ol",a=`[${h}]`,r=`[${o}]`;return t.querySelector(`${a}`)?`
      ${a},
      ${r},
      ${a} ~ :is(${n}, ${e}),
      ${a} ~ :is(${s}) > li
    `:`
      ${e},
      :is(${e}) ~ :is(${n}),
      :is(${e}) ~ :is(${s}) > li
    `}function m(t){return[...t.querySelectorAll("hs-meta[keywords]")].map(e=>e.getAttribute("keywords")).join(" ")}function g(t){return t.replace(/\xAD/g,"")}function p(t){const e=t.findIndex(n=>n.getAttribute(o)!=null);return t.slice(0,e!==-1?e:t.length)}function S(t){const e=[null,null,null,null,null],n=e.length;for(const s of t){const a=s.headingLevel();if(a!=null){e[a]=s;for(let r=a+1;r<n;r++)e[r]=null;for(let r=a-1;r>=0;r--){const l=e[r];l!=null&&(l.addDescendent(s),s.addAncestorHeading(l))}}else for(const r of e)r!=null&&(r.addDescendent(s),s.addAncestorHeading(r))}}function T(t){document.readyState!=="loading"?setTimeout(t,0):document.addEventListener("DOMContentLoaded",t)}class y{constructor(e){this.regexen=$(e.trim().toLowerCase()).split(/\s+/).map(n=>new RegExp("\\b"+n,"i"))}matches(e){const n=e.toLowerCase();return this.regexen.every(s=>n.match(s))}}function $(t){return t.replace(/[\^$\\.()*+|{}\[\]?]/g,"")}T(b);function b(){const t=document.querySelector(`input[${i}]`);if(t==null)return;const e=d(document.body),n=()=>{const s=new y(t.value);u(s,e)};n(),t.addEventListener("input",n)}});
